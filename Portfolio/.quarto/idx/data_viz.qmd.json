{"title":"Data Visualization","markdown":{"yaml":{"title":"Data Visualization","format":{"html":{"embed-resources":true,"code-fold":true}}},"headingText":"1. Vaccination Rate","containsRefs":false,"markdown":"\n\n```{r, echo=FALSE,message=FALSE,warning=FALSE}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(readxl)\nlibrary(forecast)\nlibrary(lubridate)\nlibrary(astsa) \nlibrary(xts)\nlibrary(tseries)\nlibrary(fpp2)\nlibrary(fma)\nlibrary(lubridate)\nlibrary(tidyverse)\nlibrary(TSstudio)\nlibrary(quantmod)\nlibrary(tidyquant)\nlibrary(plotly)\nlibrary(data.table)\nlibrary(kableExtra)\n```\n\n\nThis visualization is created by Tableau, check the interactive dashboard [here](https://public.tableau.com/app/profile/jiaqin.wu/viz/tableau_vacc/Story1?publish=yes).\n\n### Daily Vaccination Number Per Million\n\n![](Pics/vacc1.jpg)\n\nIn this analysis, we focus on three prominent regions in the United States: Washington D.C., New York, and California. By examining the daily vaccination numbers over time, we gain insights into the vaccination trends within each of these regions. Notably, May 2021 emerges as a peak period, marked by a significant surge in vaccination rates across all three regions, indicative of a concerted effort to inoculate a large portion of the population. However, we also observe sporadic peaks in certain time periods and states, such as December 2021 in New York and February 2022 in Washington D.C. These anomalies suggest localized events or circumstances driving heightened vaccination activity within specific regions. Given the absence of nationwide events impacting vaccination rates uniformly, we hypothesize that these sudden spikes are likely attributable to unique local factors or initiatives. Further investigation into the underlying causes of these localized surges could provide valuable insights into the dynamics of vaccination efforts at the regional level.\n\n### Number of People Vaccinated Per Hundred\n\n![](Pics/vacc2.jpg)\n\nIn this analysis, we have chosen May 10th, 2023, as our cutoff date to examine the disparities in vaccination rates per hundred individuals across different states in the post-pandemic landscape. Our visualization reveals striking contrasts among states: Massachusetts, Washington D.C., and Maryland exhibit notably higher vaccination rates, reflecting proactive vaccination campaigns and robust healthcare infrastructure. Conversely, states situated in the heartland consistently register lower vaccination rates. However, it is encouraging to note that even in these regions, the overall vaccination rates remain above 56%, underscoring a nationwide effort to achieve widespread immunity. This observation suggests a collective commitment to combating the pandemic, albeit with variations in regional implementation and success.\n\n### Number of People Vaccinated Per Hundred\n\n![](Pics/vacc3.jpg)\nIn this analysis, we have selected Alabama, Alaska, and American Samoa as representative examples for analysis. We observe a consistent upward trend in the fully vaccinated rate until April 2022, after which the rate stabilizes. Notably, American Samoa emerges as the frontrunner with the highest fully vaccinated rate, surpassing 90%, indicative of a successful vaccination campaign and strong community engagement. In contrast, Alabama lags behind the other two states, with its fully vaccinated rate only surpassing 53%. This discrepancy underscores the importance of targeted interventions and resources to address disparities and ensure equitable access to vaccination across diverse regions.\n\n# 2. Newly Confirmed Cases & Death Cases\n\n### Newly Confirmed Cases\n\n```{r, message=FALSE,warning=FALSE}\nwide_data <- read_csv(\"Datasets/covid_confirmed_usafacts.csv\")\n\n# Define the key and value columns for pivoting\nkey_cols <- c(\"countyFIPS\", \"County Name\", \"State\", \"StateFIPS\")\nvalue_cols <- setdiff(names(wide_data), key_cols)\n\n# Pivot the data from wide to long\nlong_data <- pivot_longer(\n  wide_data,\n  cols = value_cols,\n  names_to = \"date\",\n  values_to = \"value\"\n)\n\n# Group by 'State' and 'date', and calculate the sum of Confirmed Cases\ncon_case_df <- long_data %>%\n  group_by(State, date) %>%\n  summarize(value_sum = sum(value, na.rm = TRUE))\n\n# Calculate the daily new cases\ncon_case_df1 <- con_case_df %>%\n  group_by(State) %>%\n  mutate(new_cases = value_sum - lag(value_sum, default = 0))\n\n# Convert date column to Date format\ncon_case_df1$date <- as.Date(con_case_df1$date)\n\n# Filter data for DC\ncon_case_df2 <- subset(con_case_df1, State == 'DC')\n\n# Visualize the plot\ngg<-ggplot(data = con_case_df2, aes(x = date, y = new_cases)) +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Date\", y = \"Newly Confirmed Cases\", title = \"Trend of Newly Confirmed COVID-19 Cases in DC\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nUpon examining the visualization with Washington D.C. as our focal point, notable trends emerge. Between December 2021 and January 2022, a prominent peak in newly confirmed COVID-19 cases is observed, marking a period of heightened transmission within the region. This surge may be attributed to the emergence of viral mutations or other factors influencing transmission dynamics. Additionally, a smaller peak is evident in April 2022, suggesting fluctuations in case numbers over time. These findings underscore the dynamic nature of the COVID-19 pandemic and highlight the importance of monitoring and understanding temporal changes in case counts across different states.\n\n### Death Cases\n\n```{r, message=FALSE,warning=FALSE}\nwide_data <- read_csv(\"Datasets/covid_deaths_usafacts.csv\")\n\n# Define the key and value columns for pivoting\nkey_cols <- c(\"countyFIPS\", \"County Name\", \"State\", \"StateFIPS\")\nvalue_cols <- setdiff(names(wide_data), key_cols)\n\n# Pivot the data from wide to long\nlong_data <- pivot_longer(\n  wide_data,\n  cols = value_cols,\n  names_to = \"date\",\n  values_to = \"value\"\n)\n\n# Group by 'State' and 'date', and calculate the sum of Confirmed Cases\ndead_case_df <- long_data %>%\n  group_by(State, date) %>%\n  summarize(value_sum = sum(value, na.rm = TRUE))\n\n# Calculate the daily new cases\ndead_case_df1 <- dead_case_df %>%\n  group_by(State) %>%\n  mutate(new_cases = value_sum - lag(value_sum, default = 0))\n\n# Convert date column to Date format\ndead_case_df1$date <- as.Date(con_case_df1$date)\n\n# Filter data for DC\ndead_case_df2 <- subset(dead_case_df1, State == 'DC')\n\n# Visualize the plot\ngg<-ggplot(data = dead_case_df2, aes(x = date, y = new_cases)) +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Date\", y = \"Dead Cases\", title = \"Trend of Dead COVID-19 Cases in DC\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nExamining Washington D.C. as an example, we discern intriguing patterns in the trajectory of COVID-19 fatalities. In early 2020, a notable peak in deaths is observed, reflecting the initial surge of the pandemic. However, by July 2020, a discernible decline in fatalities begins, indicative of successful public health interventions and increased awareness. Despite this overall decline, intermittent peaks in January 2021, January 2022, and April 2022 punctuate the trend, suggesting periodic spikes in mortality rates. Despite these fluctuations, the overarching trend demonstrates a gradual decrease in fatalities over time, underscoring the effectiveness of ongoing mitigation strategies and vaccination efforts.\n\n# 3. COVID-19 Hospitalization Number\n\nThe visualization is created by Rshiny, you can check the interactive app [here](https://jw2104.shinyapps.io/Final_project/).\n\n\n![](Pics/hos1.jpg)\nYou have the flexibility to choose the specific state, year, and month you wish to explore, as well as the variables you'd like to visualize in the figure.\n\n![](Pics/hos2.jpg)\nYou can find descriptive information regarding the hospitalization bed capacity in Washington D.C. and other states as well, including the total number of inpatient beds, as well as the utilization rates for both general inpatient beds and those specifically allocated for COVID-19 patients.\n\n# 4. Economic Indicators (GDP Per Capita & Unemployment Rate)\n\n### GDP Per Capita\n\n```{r, message=FALSE,warning=FALSE}\ngdp <- read_csv('Datasets/gdp.csv')\n\n# Convert DATE column from m/d/yy format to Date object and reformat to \"Year\" only for simplicity\ngdp$DATE <- format(mdy(gdp$DATE), \"%Y/%m/%d\")\n\n# Convert GDP column to numeric (floating-point) format if not already\ngdp$GDP <- as.numeric(gdp$GDP)\n\n# Visualize the plot using ggplot2\ngg <- ggplot(data = gdp, aes(x = DATE, y = GDP, group = 1)) +  # 'group = 1' ensures the line plot considers all points\n  geom_line(colour = \"#5a3196\") +  # Use geom_line for line plot\n  geom_point(colour = \"#5a3196\") +  # Optional: add points on top of the line\n  labs(x = \"Year\", y = \"GDP Per Capita\", title = \"Trend of GDP Per Capita Over Years in US\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotate x-axis labels to prevent overlap\n\n# Convert ggplot object to plotly for interactive plotting\nplotly_gg <- ggplotly(gg)\n\n# Display the plotly object\nplotly_gg\n\n\n```\n \nWe observe a consistent annual increase in GDP per capita in the United States in the most of time. But there is a sudden decrease in the second quarter in 2020, which is mainly caused by COVID-19. After that period, the GDP per capita began to recover and keep increasing consistently.\n \n### Unemployment Rate\n\n```{r, message=FALSE,warning=FALSE}\nunemp <- read_csv('Datasets/unemployment.csv')\nkey_cols <- c(\"Location\")\nvalue_cols <- setdiff(names(unemp), key_cols)\nunemp1 <- pivot_longer(\n  unemp,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"Unemployment\"\n)\n\n# Convert Time column to Date format\nunemp1$Time <- as.Date(paste0(unemp1$Time, \"-01\"))\n\n# Convert Unemployment column to numeric (floating-point) format\nunemp1$Unemployment <- as.numeric(unemp1$Unemployment)\n\n# Focus on US\nunemp2 <- unemp1[unemp1$Location =='United States',]\n\n# Visualize the plot\ngg <- ggplot(data = unemp2, aes(x = Time, y = Unemployment)) +\n  geom_point() +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Year\", y = \"Unemployment Rate\", title = \"Trend of Unemployment Rate by Month in US\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n\n```\n\nAnalyzing the unemployment rate data in the US, a notable spike is observed after April 2020, marked as a distinct cutoff point in the plot. This sudden increase coincides with the onset of the pandemic outbreak, suggesting a correlation between the two events. Subsequently, post-April 2020, the unemployment rate gradually declined, eventually stabilizing by December 2021. Notably, this stabilization brings the unemployment rate close to pre-pandemic levels, indicating a gradual recovery in the labor market.\n\n# 5. Medical Corporation (Pfizer) Stock Price\n\n```{r, message=FALSE,warning=FALSE}\n# Set options to suppress warnings\noptions(\"getSymbols.warning4.0\" = FALSE)\noptions(\"getSymbols.yahoo.warning\" = FALSE)\n\n# Define the tickers\ntickers <- c(\"PFE\")\n\n# Loop through tickers to get stock data\nfor (ticker in tickers) {\n  getSymbols(ticker,\n             from = \"2020-01-01\",\n             to = \"2024-01-01\")\n}\n\n# Create a data frame with adjusted closing prices\nstock <- data.frame(date = index(PFE), value = Ad(PFE))\n\n# Visualize the plot\ngg <- ggplot(data = stock, aes(x = date, y = PFE.Adjusted)) +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Date\", y = \"Adjusted Price\", title = \"Trend of Pfizer Stock Price (2020-2024)\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nAnalyzing the fluctuations in Pfizer's stock price, we observe a discernible pattern linked to the COVID-19 pandemic. Initially, during the onset of the pandemic, the stock price experienced a decline, reflecting the uncertainties surrounding the medical corporation's operations amidst the global health crisis. However, a significant shift occurred post-August 2021, likely attributable to the widespread adoption of Pfizer's COVID-19 vaccine. This surge in demand propelled the stock price to higher levels. Subsequently, starting March 2023, a noticeable downtrend emerges, possibly indicating waning interest and widespread adoption of vaccination. This sustained decline underscores a shift in market dynamics and investor sentiment towards Pfizer's products, necessitating a deeper examination of the factors driving this trend.\n\n# 6. Party Support Rate\n\n```{r, message=FALSE,warning=FALSE}\ndemo <- read_excel('Datasets/party.xlsx',sheet = 'Democrat')\ninde <- read_excel('Datasets/party.xlsx',sheet = 'Independent')\nrep <- read_excel('Datasets/party.xlsx',sheet = 'Republican')\n\n# Transform the wide dataframe into a long dataframe\nkey_cols <- c(\"Attitude\")\nvalue_cols <- setdiff(names(demo), key_cols)\ndemo1 <- pivot_longer(\n  demo,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"democrat\"\n)\n\ninde1 <- pivot_longer(\n  inde,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"independent\"\n)\n\nrep1 <- pivot_longer(\n  rep,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"republican\"\n)\n\n# Combine these three datasets together\ncombined_data <- full_join(demo1, inde1, by = c(\"Time\", \"Attitude\")) %>%\n  full_join(rep1, by = c(\"Time\", \"Attitude\"))\n\n# Convert date column to Date format\ncombined_data$Time <- as.Date(combined_data$Time)\n\n# Visualize the plot\ngg <- ggplot(combined_data, aes(x = Time, y = democrat, color = Attitude)) +\n  geom_line() +\n  labs(title = \"Attitudes on Democratic Over Time\", x = \"Time\", y = \"Percentage\") +\n  theme_minimal()\n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nUtilizing the Democratic attitude as a focal point for our visualization, we observe the evolving sentiments towards the Democratic party over the course of the pandemic. Upon analysis, the plot reveals nuanced fluctuations in attitudes over time. However, an overarching trend of significant increase or decrease in each attitude is not readily discernible from this visualization.\n\n\n","srcMarkdownNoYaml":"\n\n```{r, echo=FALSE,message=FALSE,warning=FALSE}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(readxl)\nlibrary(forecast)\nlibrary(lubridate)\nlibrary(astsa) \nlibrary(xts)\nlibrary(tseries)\nlibrary(fpp2)\nlibrary(fma)\nlibrary(lubridate)\nlibrary(tidyverse)\nlibrary(TSstudio)\nlibrary(quantmod)\nlibrary(tidyquant)\nlibrary(plotly)\nlibrary(data.table)\nlibrary(kableExtra)\n```\n\n# 1. Vaccination Rate\n\nThis visualization is created by Tableau, check the interactive dashboard [here](https://public.tableau.com/app/profile/jiaqin.wu/viz/tableau_vacc/Story1?publish=yes).\n\n### Daily Vaccination Number Per Million\n\n![](Pics/vacc1.jpg)\n\nIn this analysis, we focus on three prominent regions in the United States: Washington D.C., New York, and California. By examining the daily vaccination numbers over time, we gain insights into the vaccination trends within each of these regions. Notably, May 2021 emerges as a peak period, marked by a significant surge in vaccination rates across all three regions, indicative of a concerted effort to inoculate a large portion of the population. However, we also observe sporadic peaks in certain time periods and states, such as December 2021 in New York and February 2022 in Washington D.C. These anomalies suggest localized events or circumstances driving heightened vaccination activity within specific regions. Given the absence of nationwide events impacting vaccination rates uniformly, we hypothesize that these sudden spikes are likely attributable to unique local factors or initiatives. Further investigation into the underlying causes of these localized surges could provide valuable insights into the dynamics of vaccination efforts at the regional level.\n\n### Number of People Vaccinated Per Hundred\n\n![](Pics/vacc2.jpg)\n\nIn this analysis, we have chosen May 10th, 2023, as our cutoff date to examine the disparities in vaccination rates per hundred individuals across different states in the post-pandemic landscape. Our visualization reveals striking contrasts among states: Massachusetts, Washington D.C., and Maryland exhibit notably higher vaccination rates, reflecting proactive vaccination campaigns and robust healthcare infrastructure. Conversely, states situated in the heartland consistently register lower vaccination rates. However, it is encouraging to note that even in these regions, the overall vaccination rates remain above 56%, underscoring a nationwide effort to achieve widespread immunity. This observation suggests a collective commitment to combating the pandemic, albeit with variations in regional implementation and success.\n\n### Number of People Vaccinated Per Hundred\n\n![](Pics/vacc3.jpg)\nIn this analysis, we have selected Alabama, Alaska, and American Samoa as representative examples for analysis. We observe a consistent upward trend in the fully vaccinated rate until April 2022, after which the rate stabilizes. Notably, American Samoa emerges as the frontrunner with the highest fully vaccinated rate, surpassing 90%, indicative of a successful vaccination campaign and strong community engagement. In contrast, Alabama lags behind the other two states, with its fully vaccinated rate only surpassing 53%. This discrepancy underscores the importance of targeted interventions and resources to address disparities and ensure equitable access to vaccination across diverse regions.\n\n# 2. Newly Confirmed Cases & Death Cases\n\n### Newly Confirmed Cases\n\n```{r, message=FALSE,warning=FALSE}\nwide_data <- read_csv(\"Datasets/covid_confirmed_usafacts.csv\")\n\n# Define the key and value columns for pivoting\nkey_cols <- c(\"countyFIPS\", \"County Name\", \"State\", \"StateFIPS\")\nvalue_cols <- setdiff(names(wide_data), key_cols)\n\n# Pivot the data from wide to long\nlong_data <- pivot_longer(\n  wide_data,\n  cols = value_cols,\n  names_to = \"date\",\n  values_to = \"value\"\n)\n\n# Group by 'State' and 'date', and calculate the sum of Confirmed Cases\ncon_case_df <- long_data %>%\n  group_by(State, date) %>%\n  summarize(value_sum = sum(value, na.rm = TRUE))\n\n# Calculate the daily new cases\ncon_case_df1 <- con_case_df %>%\n  group_by(State) %>%\n  mutate(new_cases = value_sum - lag(value_sum, default = 0))\n\n# Convert date column to Date format\ncon_case_df1$date <- as.Date(con_case_df1$date)\n\n# Filter data for DC\ncon_case_df2 <- subset(con_case_df1, State == 'DC')\n\n# Visualize the plot\ngg<-ggplot(data = con_case_df2, aes(x = date, y = new_cases)) +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Date\", y = \"Newly Confirmed Cases\", title = \"Trend of Newly Confirmed COVID-19 Cases in DC\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nUpon examining the visualization with Washington D.C. as our focal point, notable trends emerge. Between December 2021 and January 2022, a prominent peak in newly confirmed COVID-19 cases is observed, marking a period of heightened transmission within the region. This surge may be attributed to the emergence of viral mutations or other factors influencing transmission dynamics. Additionally, a smaller peak is evident in April 2022, suggesting fluctuations in case numbers over time. These findings underscore the dynamic nature of the COVID-19 pandemic and highlight the importance of monitoring and understanding temporal changes in case counts across different states.\n\n### Death Cases\n\n```{r, message=FALSE,warning=FALSE}\nwide_data <- read_csv(\"Datasets/covid_deaths_usafacts.csv\")\n\n# Define the key and value columns for pivoting\nkey_cols <- c(\"countyFIPS\", \"County Name\", \"State\", \"StateFIPS\")\nvalue_cols <- setdiff(names(wide_data), key_cols)\n\n# Pivot the data from wide to long\nlong_data <- pivot_longer(\n  wide_data,\n  cols = value_cols,\n  names_to = \"date\",\n  values_to = \"value\"\n)\n\n# Group by 'State' and 'date', and calculate the sum of Confirmed Cases\ndead_case_df <- long_data %>%\n  group_by(State, date) %>%\n  summarize(value_sum = sum(value, na.rm = TRUE))\n\n# Calculate the daily new cases\ndead_case_df1 <- dead_case_df %>%\n  group_by(State) %>%\n  mutate(new_cases = value_sum - lag(value_sum, default = 0))\n\n# Convert date column to Date format\ndead_case_df1$date <- as.Date(con_case_df1$date)\n\n# Filter data for DC\ndead_case_df2 <- subset(dead_case_df1, State == 'DC')\n\n# Visualize the plot\ngg<-ggplot(data = dead_case_df2, aes(x = date, y = new_cases)) +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Date\", y = \"Dead Cases\", title = \"Trend of Dead COVID-19 Cases in DC\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nExamining Washington D.C. as an example, we discern intriguing patterns in the trajectory of COVID-19 fatalities. In early 2020, a notable peak in deaths is observed, reflecting the initial surge of the pandemic. However, by July 2020, a discernible decline in fatalities begins, indicative of successful public health interventions and increased awareness. Despite this overall decline, intermittent peaks in January 2021, January 2022, and April 2022 punctuate the trend, suggesting periodic spikes in mortality rates. Despite these fluctuations, the overarching trend demonstrates a gradual decrease in fatalities over time, underscoring the effectiveness of ongoing mitigation strategies and vaccination efforts.\n\n# 3. COVID-19 Hospitalization Number\n\nThe visualization is created by Rshiny, you can check the interactive app [here](https://jw2104.shinyapps.io/Final_project/).\n\n\n![](Pics/hos1.jpg)\nYou have the flexibility to choose the specific state, year, and month you wish to explore, as well as the variables you'd like to visualize in the figure.\n\n![](Pics/hos2.jpg)\nYou can find descriptive information regarding the hospitalization bed capacity in Washington D.C. and other states as well, including the total number of inpatient beds, as well as the utilization rates for both general inpatient beds and those specifically allocated for COVID-19 patients.\n\n# 4. Economic Indicators (GDP Per Capita & Unemployment Rate)\n\n### GDP Per Capita\n\n```{r, message=FALSE,warning=FALSE}\ngdp <- read_csv('Datasets/gdp.csv')\n\n# Convert DATE column from m/d/yy format to Date object and reformat to \"Year\" only for simplicity\ngdp$DATE <- format(mdy(gdp$DATE), \"%Y/%m/%d\")\n\n# Convert GDP column to numeric (floating-point) format if not already\ngdp$GDP <- as.numeric(gdp$GDP)\n\n# Visualize the plot using ggplot2\ngg <- ggplot(data = gdp, aes(x = DATE, y = GDP, group = 1)) +  # 'group = 1' ensures the line plot considers all points\n  geom_line(colour = \"#5a3196\") +  # Use geom_line for line plot\n  geom_point(colour = \"#5a3196\") +  # Optional: add points on top of the line\n  labs(x = \"Year\", y = \"GDP Per Capita\", title = \"Trend of GDP Per Capita Over Years in US\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotate x-axis labels to prevent overlap\n\n# Convert ggplot object to plotly for interactive plotting\nplotly_gg <- ggplotly(gg)\n\n# Display the plotly object\nplotly_gg\n\n\n```\n \nWe observe a consistent annual increase in GDP per capita in the United States in the most of time. But there is a sudden decrease in the second quarter in 2020, which is mainly caused by COVID-19. After that period, the GDP per capita began to recover and keep increasing consistently.\n \n### Unemployment Rate\n\n```{r, message=FALSE,warning=FALSE}\nunemp <- read_csv('Datasets/unemployment.csv')\nkey_cols <- c(\"Location\")\nvalue_cols <- setdiff(names(unemp), key_cols)\nunemp1 <- pivot_longer(\n  unemp,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"Unemployment\"\n)\n\n# Convert Time column to Date format\nunemp1$Time <- as.Date(paste0(unemp1$Time, \"-01\"))\n\n# Convert Unemployment column to numeric (floating-point) format\nunemp1$Unemployment <- as.numeric(unemp1$Unemployment)\n\n# Focus on US\nunemp2 <- unemp1[unemp1$Location =='United States',]\n\n# Visualize the plot\ngg <- ggplot(data = unemp2, aes(x = Time, y = Unemployment)) +\n  geom_point() +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Year\", y = \"Unemployment Rate\", title = \"Trend of Unemployment Rate by Month in US\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n\n```\n\nAnalyzing the unemployment rate data in the US, a notable spike is observed after April 2020, marked as a distinct cutoff point in the plot. This sudden increase coincides with the onset of the pandemic outbreak, suggesting a correlation between the two events. Subsequently, post-April 2020, the unemployment rate gradually declined, eventually stabilizing by December 2021. Notably, this stabilization brings the unemployment rate close to pre-pandemic levels, indicating a gradual recovery in the labor market.\n\n# 5. Medical Corporation (Pfizer) Stock Price\n\n```{r, message=FALSE,warning=FALSE}\n# Set options to suppress warnings\noptions(\"getSymbols.warning4.0\" = FALSE)\noptions(\"getSymbols.yahoo.warning\" = FALSE)\n\n# Define the tickers\ntickers <- c(\"PFE\")\n\n# Loop through tickers to get stock data\nfor (ticker in tickers) {\n  getSymbols(ticker,\n             from = \"2020-01-01\",\n             to = \"2024-01-01\")\n}\n\n# Create a data frame with adjusted closing prices\nstock <- data.frame(date = index(PFE), value = Ad(PFE))\n\n# Visualize the plot\ngg <- ggplot(data = stock, aes(x = date, y = PFE.Adjusted)) +\n  geom_line(colour = \"#5a3196\") +\n  labs(x = \"Date\", y = \"Adjusted Price\", title = \"Trend of Pfizer Stock Price (2020-2024)\") +\n  theme_minimal() \n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nAnalyzing the fluctuations in Pfizer's stock price, we observe a discernible pattern linked to the COVID-19 pandemic. Initially, during the onset of the pandemic, the stock price experienced a decline, reflecting the uncertainties surrounding the medical corporation's operations amidst the global health crisis. However, a significant shift occurred post-August 2021, likely attributable to the widespread adoption of Pfizer's COVID-19 vaccine. This surge in demand propelled the stock price to higher levels. Subsequently, starting March 2023, a noticeable downtrend emerges, possibly indicating waning interest and widespread adoption of vaccination. This sustained decline underscores a shift in market dynamics and investor sentiment towards Pfizer's products, necessitating a deeper examination of the factors driving this trend.\n\n# 6. Party Support Rate\n\n```{r, message=FALSE,warning=FALSE}\ndemo <- read_excel('Datasets/party.xlsx',sheet = 'Democrat')\ninde <- read_excel('Datasets/party.xlsx',sheet = 'Independent')\nrep <- read_excel('Datasets/party.xlsx',sheet = 'Republican')\n\n# Transform the wide dataframe into a long dataframe\nkey_cols <- c(\"Attitude\")\nvalue_cols <- setdiff(names(demo), key_cols)\ndemo1 <- pivot_longer(\n  demo,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"democrat\"\n)\n\ninde1 <- pivot_longer(\n  inde,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"independent\"\n)\n\nrep1 <- pivot_longer(\n  rep,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"republican\"\n)\n\n# Combine these three datasets together\ncombined_data <- full_join(demo1, inde1, by = c(\"Time\", \"Attitude\")) %>%\n  full_join(rep1, by = c(\"Time\", \"Attitude\"))\n\n# Convert date column to Date format\ncombined_data$Time <- as.Date(combined_data$Time)\n\n# Visualize the plot\ngg <- ggplot(combined_data, aes(x = Time, y = democrat, color = Attitude)) +\n  geom_line() +\n  labs(title = \"Attitudes on Democratic Over Time\", x = \"Time\", y = \"Percentage\") +\n  theme_minimal()\n\nplotly_gg <- ggplotly(gg)\nplotly_gg\n```\n\nUtilizing the Democratic attitude as a focal point for our visualization, we observe the evolving sentiments towards the Democratic party over the course of the pandemic. Upon analysis, the plot reveals nuanced fluctuations in attitudes over time. However, an overarching trend of significant increase or decrease in each attitude is not readily discernible from this visualization.\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"embed-resources":true,"output-file":"data_viz.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","theme":"lumen","title":"Data Visualization"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}