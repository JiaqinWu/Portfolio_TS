{
  "hash": "ebc8e828f8193c5281f890fb6425466a",
  "result": {
    "markdown": "---\ntitle: \"Data Sources\"\nformat:  \n  html:\n   embed-resources: true\n   code-fold: true\n---\n\n::: {.cell}\n\n:::\n\n\n# 1. Vaccination Rate\n\nThe dataset utilized in this project is from the **Our World in Data** [Github Repository](https://github.com/owid/covid-19-data/tree/master/public/data/vaccinations), a reputable and freely accessible data resource website. Our World in Data relies on the collaborative efforts of various contributors, making it a valuable platform for comprehensive datasets. Specifically, we leveraged state-by-state COVID-19 vaccination rate data sourced from the United States Centers for Disease Control and Prevention (CDC) daily updates, ensuring the reliability and accuracy of the information used in our analysis.\n\n### Data Overview\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvac_df <- read_csv(\"Datasets/us_state_vaccinations.csv\")\n\n# data glimpse\ncols_show <- c('date', 'location', 'daily_vaccinations_per_million', 'people_vaccinated_per_hundred', 'people_fully_vaccinated_per_hundred')\nt <- vac_df[, cols_show]\nrbind(head(t, 3), tail(t, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> date </th>\n   <th style=\"text-align:left;\"> location </th>\n   <th style=\"text-align:right;\"> daily_vaccinations_per_million </th>\n   <th style=\"text-align:right;\"> people_vaccinated_per_hundred </th>\n   <th style=\"text-align:right;\"> people_fully_vaccinated_per_hundred </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 2021-01-12 </td>\n   <td style=\"text-align:left;\"> Alabama </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> 1.45 </td>\n   <td style=\"text-align:right;\"> 0.15 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2021-01-13 </td>\n   <td style=\"text-align:left;\"> Alabama </td>\n   <td style=\"text-align:right;\"> 1205 </td>\n   <td style=\"text-align:right;\"> 1.53 </td>\n   <td style=\"text-align:right;\"> 0.19 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2021-01-14 </td>\n   <td style=\"text-align:left;\"> Alabama </td>\n   <td style=\"text-align:right;\"> 1445 </td>\n   <td style=\"text-align:right;\"> 1.64 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2023-05-08 </td>\n   <td style=\"text-align:left;\"> Wyoming </td>\n   <td style=\"text-align:right;\"> 213 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2023-05-09 </td>\n   <td style=\"text-align:left;\"> Wyoming </td>\n   <td style=\"text-align:right;\"> 252 </td>\n   <td style=\"text-align:right;\"> NA </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2023-05-10 </td>\n   <td style=\"text-align:left;\"> Wyoming </td>\n   <td style=\"text-align:right;\"> 294 </td>\n   <td style=\"text-align:right;\"> 61.12 </td>\n   <td style=\"text-align:right;\"> 53.15 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Data dictionary\n\n- `location`: name of the state or federal entity.\n- `date`: date of the observation.\n- `daily_vaccinations`: new doses administered per day (7-day smoothed). For countries that don't report data on a daily basis, we assume that doses changed equally on a daily basis over any periods in which no data was reported. This produces a complete series of daily figures, which is then averaged over a rolling 7-day window. An example of how we perform this calculation can be found [here](https://github.com/owid/covid-19-data/issues/333#issuecomment-763015298).\n- `daily_vaccinations_per_million`: `daily_vaccinations` per 1,000,000 people in the total population of the state.\n- `people_vaccinated`: total number of people who received at least one vaccine dose. If a person receives the first dose of a 2-dose vaccine, this metric goes up by 1. If they receive the second dose, the metric stays the same.\n- `people_vaccinated_per_hundred`: `people_vaccinated` per 100 people in the total population of the state.\n- `people_fully_vaccinated`: total number of people who received all doses prescribed by the initial vaccination protocol. If a person receives the first dose of a 2-dose vaccine, this metric stays the same. If they receive the second dose, the metric goes up by 1.\n- `people_fully_vaccinated_per_hundred`: `people_fully_vaccinated` per 100 people in the total population of the state.\n\n\n# 2. Newly Confirmed Cases & Death Cases\n\nThe dataset of newly death cases and confirmed case is from [US Health Statistic and Data trends](https://usafacts.org/visualizations/coronavirus-covid-19-spread-map/). However, the growing prevalence of at-home testing and the potential for individuals to contract the virus multiple times have skewed the government data we receive. These developments, plus the end of the public health emergency — and the required data reporting that came with it — have made it difficult for us to present a clear and reliable picture of COVID-19 in America. \n\n## Newly Confirmed Cases\n### Data Overview \n\n\n::: {.cell}\n\n```{.r .cell-code}\nwide_data <- read_csv(\"Datasets/covid_confirmed_usafacts.csv\")\n\n# Define the key and value columns for pivoting\nkey_cols <- c(\"countyFIPS\", \"County Name\", \"State\", \"StateFIPS\")\nvalue_cols <- setdiff(names(wide_data), key_cols)\n\n# Pivot the data from wide to long\nlong_data <- pivot_longer(\n  wide_data,\n  cols = value_cols,\n  names_to = \"date\",\n  values_to = \"value\"\n)\n\n# Group by 'State' and 'date', and calculate the sum of Confirmed Cases\ncon_case_df <- long_data %>%\n  group_by(State, date) %>%\n  summarize(value_sum = sum(value, na.rm = TRUE))\n\n# Calculate the daily new cases\ncon_case_df1 <- con_case_df %>%\n  group_by(State) %>%\n  mutate(new_cases = value_sum - lag(value_sum, default = 0))\n\n# data glimpse\nrbind(head(con_case_df1, 3), tail(con_case_df1, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> State </th>\n   <th style=\"text-align:left;\"> date </th>\n   <th style=\"text-align:right;\"> value_sum </th>\n   <th style=\"text-align:right;\"> new_cases </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> AK </td>\n   <td style=\"text-align:left;\"> 2020-01-22 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> AK </td>\n   <td style=\"text-align:left;\"> 2020-01-23 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> AK </td>\n   <td style=\"text-align:left;\"> 2020-01-24 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> WY </td>\n   <td style=\"text-align:left;\"> 2023-07-21 </td>\n   <td style=\"text-align:right;\"> 187389 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> WY </td>\n   <td style=\"text-align:left;\"> 2023-07-22 </td>\n   <td style=\"text-align:right;\"> 187389 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> WY </td>\n   <td style=\"text-align:left;\"> 2023-07-23 </td>\n   <td style=\"text-align:right;\"> 187389 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Data dictionary\n\n- `State`: abbreviate of the states.\n- `value_sum`: total sum of confirmed cases.\n- `new_cases`: number of newly confirmed cases in each day.\n\n\n## Death Cases\n### Data Overview \n\n\n::: {.cell}\n\n```{.r .cell-code}\nwide_data <- read_csv(\"Datasets/covid_deaths_usafacts.csv\")\n\n# Define the key and value columns for pivoting\nkey_cols <- c(\"countyFIPS\", \"County Name\", \"State\", \"StateFIPS\")\nvalue_cols <- setdiff(names(wide_data), key_cols)\n\n# Pivot the data from wide to long\nlong_data <- pivot_longer(\n  wide_data,\n  cols = value_cols,\n  names_to = \"date\",\n  values_to = \"value\"\n)\n\n# Group by 'State' and 'date', and calculate the sum of Confirmed Cases\ndead_case_df <- long_data %>%\n  group_by(State, date) %>%\n  summarize(value_sum = sum(value, na.rm = TRUE))\n\n# Calculate the daily new cases\ndead_case_df1 <- dead_case_df %>%\n  group_by(State) %>%\n  mutate(new_cases = value_sum - lag(value_sum, default = 0))\n\n# data glimpse\nrbind(head(dead_case_df1, 3), tail(dead_case_df1, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> State </th>\n   <th style=\"text-align:left;\"> date </th>\n   <th style=\"text-align:right;\"> value_sum </th>\n   <th style=\"text-align:right;\"> new_cases </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> AK </td>\n   <td style=\"text-align:left;\"> 2020-01-22 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> AK </td>\n   <td style=\"text-align:left;\"> 2020-01-23 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> AK </td>\n   <td style=\"text-align:left;\"> 2020-01-24 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> WY </td>\n   <td style=\"text-align:left;\"> 2023-07-21 </td>\n   <td style=\"text-align:right;\"> 2039 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> WY </td>\n   <td style=\"text-align:left;\"> 2023-07-22 </td>\n   <td style=\"text-align:right;\"> 2039 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> WY </td>\n   <td style=\"text-align:left;\"> 2023-07-23 </td>\n   <td style=\"text-align:right;\"> 2039 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Data dictionary\n\n- `State`: abbreviate of the states.\n- `value_sum`: total sum of death cases.\n- `new_cases`: number of newly death cases in each day.\n\n# 3. COVID-19 Hospitalization Number\n\nThe dataset is from the [U.S. Department of Health & Human Services](https://healthdata.gov/Hospital/COVID-19-Reported-Patient-Impact-and-Hospital-Capa/g62h-syeh/data_preview). After Friday September 29th, 2023, as a result of changes in reporting cadence, this dataset will be updated twice a week on Wednesdays and Fridays, so we choose the data before September 29th, 2023.\n\n### Data Overview\n\n::: {.cell}\n\n```{.r .cell-code}\nhos_df <- read_csv('Datasets/COVID-19_hos.csv')\n\n# data glimpse\ncols_show <- c('state', 'date', 'inpatient_beds', 'inpatient_beds_used_covid', 'inpatient_bed_covid_utilization')\nt <- hos_df[, cols_show]\nrbind(head(t, 3), tail(t, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> state </th>\n   <th style=\"text-align:left;\"> date </th>\n   <th style=\"text-align:right;\"> inpatient_beds </th>\n   <th style=\"text-align:right;\"> inpatient_beds_used_covid </th>\n   <th style=\"text-align:right;\"> inpatient_bed_covid_utilization </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> MA </td>\n   <td style=\"text-align:left;\"> 2021-05-21 </td>\n   <td style=\"text-align:right;\"> 19292 </td>\n   <td style=\"text-align:right;\"> 281 </td>\n   <td style=\"text-align:right;\"> 0.0146675 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ND </td>\n   <td style=\"text-align:left;\"> 2021-05-20 </td>\n   <td style=\"text-align:right;\"> 2426 </td>\n   <td style=\"text-align:right;\"> 94 </td>\n   <td style=\"text-align:right;\"> 0.0391667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> RI </td>\n   <td style=\"text-align:left;\"> 2021-05-20 </td>\n   <td style=\"text-align:right;\"> 2556 </td>\n   <td style=\"text-align:right;\"> 121 </td>\n   <td style=\"text-align:right;\"> 0.0486530 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> VI </td>\n   <td style=\"text-align:left;\"> 2023-03-21 </td>\n   <td style=\"text-align:right;\"> 168 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0.0178571 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> IL </td>\n   <td style=\"text-align:left;\"> 2023-03-12 </td>\n   <td style=\"text-align:right;\"> 28759 </td>\n   <td style=\"text-align:right;\"> 823 </td>\n   <td style=\"text-align:right;\"> 0.0289503 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NY </td>\n   <td style=\"text-align:left;\"> 2023-03-29 </td>\n   <td style=\"text-align:right;\"> 45149 </td>\n   <td style=\"text-align:right;\"> 1292 </td>\n   <td style=\"text-align:right;\"> 0.0289051 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Data dictionary\n\n- `inpatient_beds`: Reported total number of staffed inpatient beds including all overflow and surge/expansion beds used for inpatients (includes all ICU beds) in this state\n- `inpatient_beds_used_covid`: Reported patients currently hospitalized in an inpatient bed who have suspected or confirmed COVID-19 in this state\n- `inpatient_bed_covid_utilization`: Percentage of total (used/available) inpatient beds currently utilized by patients who have suspected or confirmed COVID-19 in this state. This number only accounts for hospitals in the state that report both \"inpatient_beds_used_covid\" and \"inpatient_beds\" fields.\n\n\n# 4. Economic Indicators (GDP Per Capita & Unemployment Rate)\n\nThe GDP Per Capita data is sourced from the [Fred Economic Data](https://fred.stlouisfed.org/series/GDP), providing a quarterly perspective. On the other hand, the monthly Unemployment Rate data is obtained from the [KFF Database](https://www.kff.org/other/state-indicator/unemployment-rate/?currentTimeframe=0&sortModel=%7B%22colId%22:%22Location%22,%22sort%22:%22asc%22%7D). Together, these indicators offer insights into the economic landscape, reflecting both the country's per capita income trends and the dynamic nature of unemployment rates on a monthly basis.\n\n## GDP Per Capita\n### Data Overview\n\n::: {.cell}\n\n```{.r .cell-code}\ngdp <- read_csv('Datasets/gdp.csv')\n\n# data glimpse\nrbind(head(gdp, 3),  tail(gdp, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> DATE </th>\n   <th style=\"text-align:right;\"> GDP </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1/1/17 </td>\n   <td style=\"text-align:right;\"> 19280.08 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4/1/17 </td>\n   <td style=\"text-align:right;\"> 19438.64 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 7/1/17 </td>\n   <td style=\"text-align:right;\"> 19692.60 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4/1/23 </td>\n   <td style=\"text-align:right;\"> 27063.01 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 7/1/23 </td>\n   <td style=\"text-align:right;\"> 27610.13 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 10/1/23 </td>\n   <td style=\"text-align:right;\"> 27944.63 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Unemployment Rate\n### Data Overview\n\n::: {.cell}\n\n```{.r .cell-code}\nunemp <- read_csv('Datasets/unemployment.csv')\nkey_cols <- c(\"Location\")\nvalue_cols <- setdiff(names(unemp), key_cols)\nunemp1 <- pivot_longer(\n  unemp,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"Unemployment\"\n)\n\n# data glimpse\nrbind(head(unemp1, 3), tail(unemp1, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Location </th>\n   <th style=\"text-align:left;\"> Time </th>\n   <th style=\"text-align:right;\"> Unemployment </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> United States </td>\n   <td style=\"text-align:left;\"> 2020-01 </td>\n   <td style=\"text-align:right;\"> 0.036 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United States </td>\n   <td style=\"text-align:left;\"> 2020-02 </td>\n   <td style=\"text-align:right;\"> 0.035 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> United States </td>\n   <td style=\"text-align:left;\"> 2020-03 </td>\n   <td style=\"text-align:right;\"> 0.044 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Puerto Rico </td>\n   <td style=\"text-align:left;\"> 2022-01 </td>\n   <td style=\"text-align:right;\"> 0.071 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Puerto Rico </td>\n   <td style=\"text-align:left;\"> 2022-02 </td>\n   <td style=\"text-align:right;\"> 0.068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Puerto Rico </td>\n   <td style=\"text-align:left;\"> 2022-03 </td>\n   <td style=\"text-align:right;\"> 0.065 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n# 5. Medical Corporation (Pfizer) Stock Price\n\nStock price information for Pfizer (PFE) is retrieved from Yahoo Finance using the **quantmod** package in R. The adjusted closing prices are considered, offering a reflection of the stock's value while accounting for factors such as dividends and stock splits.\n\n### Data Overview\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set options to suppress warnings\noptions(\"getSymbols.warning4.0\" = FALSE)\noptions(\"getSymbols.yahoo.warning\" = FALSE)\n\n# Define the tickers\ntickers <- c(\"PFE\")\n\n# Loop through tickers to get stock data\nfor (ticker in tickers) {\n  getSymbols(ticker,\n             from = \"2020-01-01\",\n             to = \"2024-01-01\")\n}\n\n# Create a data frame with adjusted closing prices\nstock <- data.frame(date = index(PFE), value = Ad(PFE))\n\n# data glimpse\nrbind(head(stock, 3), tail(stock, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> date </th>\n   <th style=\"text-align:right;\"> PFE.Adjusted </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 2020-01-02 </td>\n   <td style=\"text-align:right;\"> 31.33902 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2020-01-03 </td>\n   <td style=\"text-align:right;\"> 31.17088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2020-01-06 </td>\n   <td style=\"text-align:right;\"> 31.13085 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2023-12-27 </td>\n   <td style=\"text-align:right;\"> 28.18585 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2023-12-28 </td>\n   <td style=\"text-align:right;\"> 28.36318 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2023-12-29 </td>\n   <td style=\"text-align:right;\"> 28.36318 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Data dictionary\n\n- `PFE.Adjusted`: Adjusted cloning stock price for Pfizer Inc.\n\n\n# 6. Party Support Rate\n\nThe data on party support rates is sourced from the [YouGov Website](https://today.yougov.com/topics/politics/trackers/the-republican-party-favorability?crossBreak=democrat). This dataset reveals the evolving sentiments of US citizens towards political parties, capturing both favorable and unfavorable attitudes over time.\n\n### Data Overview\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo <- read_excel('Datasets/party.xlsx',sheet = 'Democrat')\ninde <- read_excel('Datasets/party.xlsx',sheet = 'Independent')\nrep <- read_excel('Datasets/party.xlsx',sheet = 'Republican')\n\n# Transform the wide dataframe into a long dataframe\nkey_cols <- c(\"Attitude\")\nvalue_cols <- setdiff(names(demo), key_cols)\ndemo1 <- pivot_longer(\n  demo,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"democrat\"\n)\n\ninde1 <- pivot_longer(\n  inde,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"independent\"\n)\n\nrep1 <- pivot_longer(\n  rep,\n  cols = value_cols,\n  names_to = \"Time\",\n  values_to = \"republican\"\n)\n\n# Combine these three datasets together\ncombined_data <- full_join(demo1, inde1, by = c(\"Time\", \"Attitude\")) %>%\n  full_join(rep1, by = c(\"Time\", \"Attitude\"))\n\n# data glimpse\nrbind(head(combined_data, 3), tail(combined_data, 3)) %>%\n  kbl(row.names = FALSE) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Attitude </th>\n   <th style=\"text-align:left;\"> Time </th>\n   <th style=\"text-align:right;\"> democrat </th>\n   <th style=\"text-align:right;\"> independent </th>\n   <th style=\"text-align:right;\"> republican </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Favorable </td>\n   <td style=\"text-align:left;\"> 2020-01-07 </td>\n   <td style=\"text-align:right;\"> 0.89 </td>\n   <td style=\"text-align:right;\"> 0.33 </td>\n   <td style=\"text-align:right;\"> 0.07 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Favorable </td>\n   <td style=\"text-align:left;\"> 2020-01-14 </td>\n   <td style=\"text-align:right;\"> 0.87 </td>\n   <td style=\"text-align:right;\"> 0.27 </td>\n   <td style=\"text-align:right;\"> 0.07 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Favorable </td>\n   <td style=\"text-align:left;\"> 2020-01-21 </td>\n   <td style=\"text-align:right;\"> 0.93 </td>\n   <td style=\"text-align:right;\"> 0.29 </td>\n   <td style=\"text-align:right;\"> 0.06 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Don't know </td>\n   <td style=\"text-align:left;\"> 2023-11-27 </td>\n   <td style=\"text-align:right;\"> 0.02 </td>\n   <td style=\"text-align:right;\"> 0.04 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Don't know </td>\n   <td style=\"text-align:left;\"> 2023-12-26 </td>\n   <td style=\"text-align:right;\"> 0.01 </td>\n   <td style=\"text-align:right;\"> 0.06 </td>\n   <td style=\"text-align:right;\"> 0.01 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Don't know </td>\n   <td style=\"text-align:left;\"> 2024-01-30 </td>\n   <td style=\"text-align:right;\"> 0.02 </td>\n   <td style=\"text-align:right;\"> 0.07 </td>\n   <td style=\"text-align:right;\"> 0.02 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n",
    "supporting": [
      "data_source_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}